<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Komuta&#39;s Blog - PHP の配列は参照渡しにするべきか？値渡しにするべきか？ </title>

    
    
    <meta content="php" name="keywords">
    
    <meta content="Komuta&#39;s Blog - &amp; をたくさん使って参照渡しをしているコードを見ます。 参照渡しをした方がいいのか、値渡しにしてメソッドに結果値を返させるのではどちらが良いかと" name="description">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    

    

    

    
    
    <script type="text/javascript" async
        src="/mathjax-3.0.0/tex-mml-chtml.js">
    </script>
    

    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/self/css/default.css">
    <script src="/layui/layui.js"></script>


    <link rel="stylesheet" async href="/self/css/markdown.min.css">
    <link rel="stylesheet" async href="/self/css/gallery.css">
    <link rel="stylesheet" async href="/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="/self/js/lazysizes.min.js" async></script></head>

<body>
    
    <header class="layui-header layui-bg-cyan">

    
    
    <a class="nav-self-logo" href="/">
        Komuta&#39;s Blog
    </a>

    <ul class="layui-nav layui-layout-right layui-bg-cyan" lay-filter="">
        
        
        <li class="layui-nav-item" id="nav_big"><a href="/post/">Posts</a></li>
        

        
            
                <li class="layui-nav-item" id="nav_big"><a href="/about/">About</a></li>
            
        

        
        <li class="layui-nav-item" id="nav_small">
            <a href="javascript:;">
                <i class="layui-icon layui-icon-app" style="font-size: 24px;"></i>
            </a>

            <dl class="layui-nav-child">
                
                <dd><a href="/post/">Posts</a></dd>
                

                
                    
                        <dd><a href="/about/">About</a></dd>
                    
                
            </dl>
        </li>
    </ul>
</header>

<script>
layui.use('element', function(){
  var element = layui.element;
});
</script>
        <div id="content" style="min-height:80%">
<div class="layui-container" style="margin-bottom: 10px">
    <div class="layui-row layui-col-space10">
        <div class="layui-col-sm12 layui-col-xs12">
            <div class="layui-card single-card">
                <br />
                <blockquote class="layui-elem-quote markdown-body single-title" >
                    <h1>PHP の配列は参照渡しにするべきか？値渡しにするべきか？</h1>
                    <h3 style="margin-top:10px; margin-bottom:10px"> 
    <span>2017-06-16</span>

    
    
        <a href="/tags/php/">
            <span class="layui-badge" style="vertical-align: 2px;">php</span>
        </a>
    
</h3>
                </blockquote>
                <div class="layui-card-body markdown-body single-content">
                    <p><code>&amp;</code> をたくさん使って参照渡しをしているコードを見ます。<br>
参照渡しをした方がいいのか、値渡しにしてメソッドに結果値を返させるのではどちらが良いかということを考えてみたいと思います。</p>
<h1 id="phpの仕様">PHPの仕様</h1>
<ul>
<li>配列は値</li>
<li>デフォルトは値渡し</li>
<li>パラメータに&amp;を付けると参照渡しができる</li>
</ul>
<h1 id="参照渡しと値渡しのメリットデメリット">参照渡しと値渡しのメリット・デメリット</h1>
<h2 id="参照渡し">参照渡し</h2>
<ul>
<li>java や C++ の参照渡しと同じ感覚でコーディングできる</li>
<li>&amp;を書き忘れると呼び出しではデータが変わらない、またそれに気が付きにくい</li>
</ul>
<h2 id="値渡し">値渡し</h2>
<ul>
<li><code>&amp;</code> を書き忘れるというヒューマンエラーが起きない</li>
<li>返却される値を見ればいいので、デバッグが楽</li>
<li>必ず値を返さなければならない</li>
</ul>
<h1 id="観点">観点</h1>
<p>ここで注目したいのが、値渡しとしてメソッドを定義すれば <code>&amp;</code> を書き忘れるというヒューマンエラーが起きないということです。<br>
先日リファクタリングをしていてメソッドの抽出を行った際、<code>&amp;</code> を付け忘れてしまって配列の値が正しくないことに数日気がつかないということがありました。<br>
その配列は4つのクラスをまたいでおり、どこで値がおかしくなっているのかをデバッグするのに大変時間がかかりました。</p>
<h1 id="まとめ">まとめ</h1>
<p>配列を引数に渡すメソッドを定義するときに、参照渡しか値渡しにするべきか迷ったら「値渡し」を選択した方がいいと思います。</p>
</div>
            </div>
        </div>
    </div>
</div>


        </div><footer>
    
    
    <div class="layui-container">
        <p class="copyright">&copy; All rights reserved. Powered by <a href='https://gohugo.io' style='color:#FFFFFF'>Hugo</a> and <a href='https://github.com/ertuil/erblog' style='color:#FFFFFF'>Erblog</a>.</p>
    </div>
</footer>
</body>
</html>
